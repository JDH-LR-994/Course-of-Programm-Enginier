#!/bin/bash

# Проверка количества аргументов
if [ "$#" -ne 2 ]; then
    echo "Использование: $0 <эталонный каталог> <целевой каталог>"
    exit 1
fi

SOURCE_DIR=$1  # Эталонный каталог
TARGET_DIR=$2  # Целевой каталог

# Создание целевого каталога, если он не существует
mkdir -p "$TARGET_DIR"

# Копирование новых и обновлённых файлов из эталонного каталога в целевой
cp -ru "$SOURCE_DIR"/* "$TARGET_DIR/"

# Удаление файлов из целевого каталога, которых нет в эталонном
for file in "$TARGET_DIR"/*; do
    if [ ! -e "$SOURCE_DIR/$(basename "$file")" ]; then
        rm "$file"
    fi
done

echo "Синхронизация завершена."